# Система управления разгрузкой самосвалов

Django-приложение для управления процессом разгрузки самосвалов на склад с расчетом:
- Объема руды на складе
- Химического состава (SiO₂ и Fe)
- Контроля перегруза самосвалов
- Координат разгрузки самосвалов

## Технологии
- Python 3.11
- Django 5.2
- PostGIS
- Docker
- WSL2 (для Windows)

## Установка

### Требования
- Установленный Docker Desktop
- Активированная подсистема WSL2 (для Windows)

### Запуск
1. Клонировать репозиторий:
```bash
git clone https://github.com/ribondareva/Trucks.git
cd Trucks
```
2. Создать виртуальное окружение и активировать его
```
python -m venv venv
source venv/bin/activate  # для Windows: venv\Scripts\activate
```
3. Установить зависимости:
```
pip install -r requirements.txt
```
4. Создайте файл .env со следующим содержимым:
```
LANG=C.UTF-8
LC_ALL=C.UTF-8
PYTHONUTF8=1
```
5. Запустить сервисы:
```bash
docker-compose up --build -d
```
6. Приложение будет доступно по адресу:
```
http://localhost:8000
```
## Тестовые данные
### Таблица 1: Самосвалы

| Бортовой номер | Модель  | Макс.груз | Текущий груз | SiO₂ | Fe  |
|----------------|---------|-----------|--------------|------|-----|
| 101            | БЕЛАЗ   | 120 т     | 100 т        | 32%  | 67% |
| 102            | БЕЛАЗ   | 120 т     | 125 т        | 30%  | 65% |
| K103           | Komatsu | 110 т     | 120 т        | 35%  | 62% |

### Таблица 2: Склад (исходное состояние)

| Параметр    | Значение |
|-------------|----------|
| Объем       | 900 т    |
| SiO₂        | 34%      |
| Fe          | 65%      |

## Тестовые случаи
### 1. Полная успешная разгрузка
**Входные данные:**
- 101: 30 20 (попадает)
- 102: 25 30 (попадает)
- K103: 15 25 (попадает)

**Ожидаемый результат:**
- Все самосвалы разгружены
- Новый объем склада: 1245 т (900 + 100 + 125 + 120)
- Новый состав:
  - SiO₂: ≈33.5%
  - Fe: ≈64.9%
- Сообщение: "Успешно разгружены самосвалы: 101, 102, K103"

---

### 2. Частичная разгрузка
**Входные данные:**
- 101: 35 35 (попадает)
- 102: 50 50 (НЕ попадает)
- K103: 15 25 (попадает)

**Ожидаемый результат:**
- Разгружаются только 101 и K103
- Новый объем: 1120 т (900 + 100 + 120)
- Новый состав:
  - SiO₂: ≈33.9%
  - Fe: ≈64.9%
- У самосвала 102 остается прежний груз
- Сообщение об ошибке: "Координаты вне территории склада для самосвала 102"

---

### 3. Все самосвалы не попали
**Входные данные:**
- 101: 50 10
- 102: 0 0
- K103: 100 100

**Ожидаемый результат:**
- Объем склада остается 1120 т
- Состав не изменяется (33.9% SiO₂, 64.9% Fe)
- Все самосвалы сохраняют груз
- Сообщения об ошибках для всех машин

---

### 4. Неверный формат координат
**Входные данные:**
- 101: двадцать пять
- 102: 30,20
- K103: 20-30

**Ожидаемый результат:**
- Форма не отправляется
- Показываются ошибки валидации
- Данные не изменяются

---

### 5. Граничные случаи координат
**Входные данные:**
- 101: 30 10 (граничная точка)
- 102: 20 40 (граничная точка)
- K103: 25 25 (внутри)

**Ожидаемый результат:**
- Граничные точки считаются валидными
- Разгрузка для всех самосвалов

---

### 6. Пустые координаты
**Действие:**
- Оставить одно или несколько полей пустыми

**Ожидаемый результат:**
- Форма не валидируется
- Сообщение об обязательности заполнения
